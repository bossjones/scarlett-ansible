#!/usr/bin/env bash

export LC_ALL=C

sudo add-apt-repository -y ppa:gstreamer-developers/ppa
sudo apt-get update
sudo apt-get install -y bash-completion swig

cd /home/pi/dev/bossjones-github/scarlett
sudo pip install tox sphinx

# Get the required libraries
sudo apt-get install -y build-essential autotools-dev automake autoconf \
                                    libtool autopoint libxml2-dev zlib1g-dev libglib2.0-dev \
                                    pkg-config bison flex python git gtk-doc-tools libasound2-dev \
                                    libgudev-1.0-dev libxt-dev libvorbis-dev libcdparanoia-dev \
                                    libpango1.0-dev libtheora-dev libvisual-0.4-dev iso-codes \
                                    libgtk-3-dev libraw1394-dev libiec61883-dev libavc1394-dev \
                                    libv4l-dev libcairo2-dev libcaca-dev libspeex-dev libpng-dev \
                                    libshout3-dev libjpeg-dev libaa1-dev libflac-dev libdv4-dev \
                                    libtag1-dev libwavpack-dev libpulse-dev libsoup2.4-dev libbz2-dev \
                                    libcdaudio-dev libdc1394-22-dev ladspa-sdk libass-dev \
                                    libcurl4-gnutls-dev libdca-dev libdirac-dev libdvdnav-dev \
                                    libexempi-dev libexif-dev libfaad-dev libgme-dev libgsm1-dev \
                                    libiptcdata0-dev libkate-dev libmimic-dev libmms-dev \
                                    libmodplug-dev libmpcdec-dev libofa0-dev libopus-dev \
                                    librsvg2-dev librtmp-dev libschroedinger-dev libslv2-dev \
                                    libsndfile1-dev libsoundtouch-dev libspandsp-dev libx11-dev \
                                    libxvidcore-dev libzbar-dev libzvbi-dev liba52-0.7.4-dev \
                                    libcdio-dev libdvdread-dev libmad0-dev libmp3lame-dev \
                                    libmpeg2-4-dev libopencore-amrnb-dev libopencore-amrwb-dev \
                                    libsidplay1-dev libtwolame-dev libx264-dev

## this instals glib ( I think )
sudo apt-get install -y \
    libgirepository1.0-dev \
    gstreamer1.0-plugins-good \
    gir1.2-clutter-1.0 \
    gir1.2-clutter-gst-1.0 \
    gir1.2-gtkclutter-1.0 \
    gir1.2-gtksource-3.0 \
    gir1.2-vte-2.90 \
    gir1.2-webkit-1.0 \
    gir1.2-webkit-3.0

sudo apt-get install -y git libcairo2-dev libgtk2.0-dev libglib2.0-dev libtool libpango1.0-dev libatk1.0-dev libffi-dev libpq-dev libmysqlclient-dev
sudo apt-get install -y libglib2.0-*

sudo apt-get install apt-file -y
sudo apt-get install python-libxml2 -y
sudo apt-file update

sudo apt-get install gnome-core-devel gnome-devel -y
sudo apt-get install anjuta glade devhelp -y
sudo apt-get install gstreamer0.10-plugins-bad gstreamer0.10-plugins-bad-multiverse -y
sudo apt-get install libgtk-3-dev libgstreamer0.10-dev libclutter-1.0-dev libwebkitgtk-3.0-dev libgda-5.0-dev -y
sudo apt-get install libgtk-3-doc gstreamer0.10-doc libclutter-1.0-doc libgda-5.0-doc -y
sudo apt-get install g++ -y
sudo apt-get install libgtkmm-3.0-dev libgstreamermm-0.10-dev libgdamm5.0-dev -y
sudo apt-get install libgtkmm-3.0-doc libgstreamermm-0.10-doc libgdamm5.0-doc -y
sudo apt-get install python python-gobject -y
sudo apt-get install git build-essential automake libtool itstool gtk-doc-tools gnome-common gnome-doc-utils yasm flex bison -y

sudo apt-get install libgirepository1.0-dev python-gi-dev \
libcairo2-dev python-gi-cairo \
libgdk-pixbuf2.0-dev libpulse-dev libgtk-3-dev \
libclutter-1.0-dev libclutter-gtk-1.0-dev \
libclutter-gst-1.0-0 libclutter-gst-1.0-dbg libclutter-gst-dev gir1.2-clutter-gst-1.0 \
libxml2-dev python-numpy gir1.2-clutter-1.0 -y

sudo apt-get install gstreamer1.0-plugins-base gstreamer1.0-plugins-good gstreamer1.0-plugins-bad gstreamer1.0-alsa gstreamer1.0-pulseaudio \
libgstreamer-plugins-bad1.0-dev libgstreamer-plugins-base1.0-dev libgstreamer1.0-dev libgstreamer1.0-0 -y

# GStreamer plugins' full set of dependencies to build all the codecs:
sudo apt-get build-dep gstreamer1.0-plugins-base gstreamer1.0-plugins-good gstreamer1.0-plugins-bad gstreamer1.0-plugins-ugly
sudo apt-get install libglu1-mesa-dev


cd /home/pi/dev/bossjones-github/scarlett

sudo pip install numpy

#### $PYTHON -c "import cairo"
#### rc=$?
####
#### if [ $rc -ne 0 ]; then
####   echo "Installing PY2CAIRO."
####   cd /home/pi/dev/bossjones-github/scarlett
####   curl -L "http://www.cairographics.org/releases/py2cairo-${_PYCAIRO_VERSION}.tar.bz2" > "${SCARLETT_APP_HOME}/py2cairo-${_PYCAIRO_VERSION}.tar.bz2"
####   tar xvf py2cairo-$_PYCAIRO_VERSION.tar.bz2
####   cd py2cairo-$_PYCAIRO_VERSION
####   #./waf configure --prefix=$VIRT_ROOT > /dev/null
####   #CFLAGS=-I/usr/include/cairo/ ./waf configure --prefix=$VIRT_ROOT > /dev/null
####   ./waf configure --prefix=$VIRT_ROOT
####   ./waf build
####   ./waf install
####   cd ..
####   rm -rf $SCARLETT_APP_HOME/py2cairo-$_PYCAIRO_VERSION
#### fi
####
#### $PYTHON -c "import gi"
#### rc=$?
#### if [ $rc -ne 0 ]; then
####
####     echo "Installing PyGTK3."
####     cd /home/pi/dev/bossjones-github/scarlett
####     #wget -c http://ftp.gnome.org/pub/GNOME/sources/pygobject/3.8/pygobject-$PYGOBJECT_V.tar.xz
####     curl -L "http://ftp.gnome.org/pub/GNOME/sources/pygobject/3.8/pygobject-$PYGOBJECT_V.tar.xz" > "${SCARLETT_APP_HOME}/pygobject-${PYGOBJECT_V}.tar.xz"
####     tar xJf pygobject-$PYGOBJECT_V.tar.xz
####     rc=$?
####     if [ $rc -ne 0 ]; then
####       echo "Code was: ${rc}"
####       exit 1
####     fi
####     cd pygobject-$PYGOBJECT_V
####     PYTHON=$VIRT_ROOT/bin/$PYTHON ./configure --prefix=$VIRT_ROOT
####     make install
####     cd ..
####     #rm -rf $SCARLETT_APP_HOME/pygobject-$PYGOBJECT_V
#### fi
####
#### $PYTHON -c "import pyxser"
#### rc=$?
#### if [ $rc -ne 0 ]; then
####
####     echo "Installing pyxser."
####
####     pip install https://github.com/eugeneai/pyxser/archive/master.zip
#### fi
####
#### cd ..

sudo apt-get install -y git build-essential automake libtool itstool gtk-doc-tools gnome-common gnome-doc-utils yasm flex bison
sudo apt-get install -y python-gst0.10 python-gst0.10-dev gstreamer0.10-plugins-good
sudo apt-get install -y gstreamer0.10-ffmpeg gstreamer-tools gstreamer0.10-alsa gstreamer0.10-nice gstreamer0.10-plugins-good gstreamer0.10-plugins-bad gstreamer0.10-plugins-ugly gstreamer0.10-tools libgstreamer-plugins-bad0.10-0 libgstreamer-plugins-bad0.10-dev libgstreamer-plugins-base0.10-0 libgstreamer-plugins-base0.10-dev libgstreamer0.10-0 libgstreamer0.10-0-dbg libgstreamer0.10-cil-dev libgstreamer0.10-dev libgstrtspserver-0.10-0 libgstrtspserver-0.10-dev libnice-dev
sudo apt-get install -y gstreamer0.10-plugins-bad gstreamer0.10-plugins-ugly
sudo apt-get install -y gstreamer0.10-pulseaudio
sudo apt-get install -y gstreamer0.10-alsa
sudo apt-get install -y pavucontrol gstreamer0.10-pulseaudio pulseaudio
sudo apt-get install -y gstreamer0.10-pulseaudio libao4 libasound2-plugins libgconfmm-2.6-1c2 libglademm-2.4-1c2a libpulse-dev libpulse-mainloop-glib0 libpulse-mainloop-glib0-dbg libpulse0 libpulse0-dbg libsox-fmt-pulse paman paprefs pavucontrol pavumeter pulseaudio pulseaudio-dbg pulseaudio-esound-compat pulseaudio-esound-compat-dbg pulseaudio-module-bluetooth pulseaudio-module-gconf pulseaudio-module-jack pulseaudio-module-lirc pulseaudio-module-lirc-dbg pulseaudio-module-x11 pulseaudio-module-zeroconf pulseaudio-module-zeroconf-dbg pulseaudio-utils
sudo apt-get install -y bison
sudo apt-get install -y autoconf automake bison build-essential libasound2-dev libgstreamer0.10-dev libgstreamer-plugins-base0.10-dev libtool python-gst0.10 python-pyside python-gst0.10 python-gst0.10-dbg python-gst0.10-dev python-gst0.10-rtsp python-iplib python-simplejson
sudo apt-get install -y python-gst0.10 python-gst0.10-dbg python-gst0.10-dev python-gst0.10-rtsp python-pip python-setuptools python-gtk2 python-yaml python-yaml-dbg
sudo apt-get install -y python2.7-dev
sudo apt-get install -y bison
export LD_LIBRARY_PATH=$VIRT_ROOT/lib
export PKG_CONFIG_PATH=$VIRT_ROOT/lib/pkgconfig
export GST_PLUGIN_PATH=/usr/local/lib/gstreamer-1.0

### curl "http://gstreamer.freedesktop.org/src/gst-python/gst-python-${_GST_PYTHON_VERSION}.tar.gz" > "${SCARLETT_APP_HOME}/gst-python-${_GST_PYTHON_VERSION}.tar.gz"
### tar xvf gst-python-${_GST_PYTHON_VERSION}.tar.gz
### cd gst-python-${_GST_PYTHON_VERSION}
### ./configure --prefix=$VIRT_ROOT
### make > /dev/null
### make install > /dev/null
### cd ..

# import
#python -c 'from gi.repository import Gtk; print Gtk'

#wget http://downloads.sourceforge.net/project/cmusphinx/sphinxbase/0.8/sphinxbase-0.8.tar.gz
#tar -zxf sphinxbase-0.8.tar.gz
cd /home/pi/dev/bossjones-github/scarlett
cd sphinxbase-0.8
./configure
make
sudo make install
cd ..
#git clone https://github.com/bossjones/bossjones-pocketsphinx.git
cd bossjones-pocketsphinx
./configure
make
sudo make install
cd ..
sudo ldconfig
cd /home/pi/dev/bossjones-github/scarlett
sudo pip install -r requirements_dev.txt
sudo pip install -r requirements.txt
